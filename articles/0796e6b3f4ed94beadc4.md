---
title: "ã‚¤ã‚±ãƒ¡ãƒ³diff viewerã®Deltaã‚’å…¥ã‚Œã¦ã¿ãŸ"
emoji: "ğŸ”º"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [git,cli]
published: true
---

## ã¯ã˜ã‚ã«

å·®åˆ†ã¨ã„ã†ã‚‚ã®ã¯è¦‹ã‚„ã™ã„ã»ã†ãŒã‚ˆã„ã§ã™ã‚ˆã­
`git-delta` ã¯å·®åˆ†ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€é…è‰²ã‚’ã„ã„æ„Ÿã˜ã«è¨­å®šã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™
å€‹äººçš„ã«ã‚¢ãƒ„ã„è¨€èªã€**Rust**ã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™

ãã‚“ãª `git-delta` ã‚’å°å…¥ã—ã¦ã¿ãŸè¨˜äº‹ã§ã™

https://github.com/dandavison/delta

#### æœ¬è¨˜äº‹ã®ç’°å¢ƒ
OS:macOS
git version   2.31.1
delta version 0.7.1

## æ§‹æˆ
#### install
[dandavison/delta: A viewer for git and diff output](https://github.com/dandavison/delta) 
ç­†è€…ã®ç’°å¢ƒã¯macãªã®ã§Homebrewã‚’ç”¨ã„ã¾ã™
```bash
$ brew install git-delta
```

#### è¨­å®š

git ã® pagerã« `delta` ã‚’æŒ‡å®šã™ã‚‹ã¨ git ã‚³ãƒãƒ³ãƒ‰ã®diffè¡¨ç¤ºãŒè£…é£¾ã•ã‚Œã¾ã™
`~/.gitconfig` or `~/.config/git/config` ã«å…¬å¼ã®ä¾‹ã‚’è¿½è¨˜ã—ã¦ã¿ã‚‹

```git:~/.config/git/config
[pager]
    diff = delta
    log = delta
    reflog = delta
    show = delta

[delta]
    plus-style = "syntax #012800"
    minus-style = "syntax #340001"
    syntax-theme = Monokai Extended
    navigate = true

[interactive]
    diffFilter = delta --color-only
```

é©å½“ã« git show ã—ã¦ã¿ã‚‹
![](https://storage.googleapis.com/zenn-user-upload/cb257a6058e82025cff531be.png)

ãªã‚“ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†

#### git ã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦
diff view ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦ã¯ deltaã®UIãŒåæ˜ ã•ã‚Œã¾ã™
å¯¾è©±ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å ´åˆã‚‚åŒæ§˜ã§ã™ (`git add -p`ç­‰)
å…ˆç¨‹ã®è¨­å®šã®ä»¥ä¸‹ã®è¨˜è¿°ã¯ã€å¯¾è©±ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§deltaã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‚‚ã®ã§ã™
```git
[interactive]
    diffFilter = delta --color-only
```

git ã‚³ãƒãƒ³ãƒ‰ã§ deltaã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã«ã¯ `-c` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹ã¨ã„ã„ã§ã™
```bash
git -c delta.side-by-side=true show
```

:::message
`git -c` ã§ã® ã‚ªãƒ—ã‚·ãƒ§ãƒ³æŒ‡å®šã§ã™ãŒ
gitï¼š2.31.1, deltaï¼š0.7.1ã§ã¯å‹•ä½œã—ã¾ã›ã‚“ã§ã—ãŸ
ISSUEè²¼ã£ã¨ãã¾ã™
:::

https://github.com/dandavison/delta/issues/493

## è¨­å®šå¯èƒ½ãªFlagã‚’è¦‹ã¦ã¿ã‚‹

è¡¨ç¤ºæ–¹æ³•ã®å¤‰æ›´ã€è¨­å®šã®ç¢ºèªã¨ã‹

#### è¡Œç•ªå·ã‚’è¡¨ç¤º

```git:config
[delta]
    line-numbers = true
```

```bash
delta -n hoge.txt foo.txt
```

![](https://storage.googleapis.com/zenn-user-upload/3f3670f2f6b6cc98ffe29f2e.png)
*line-numbers off*

![](https://storage.googleapis.com/zenn-user-upload/24501cad3cc384016acf5928.png)
*line-numbers on*

#### æ¨ªã«ä¸¦ã¹ã¦è¡¨ç¤º
å€‹äººçš„ã«ã“ã£ã¡ã®ãŒ 100å€è¦‹ã‚„ã™ã„

```
[delta]
    side-by-side = true
```

```
delta -s hoge.txt foo.txt
```

![](https://storage.googleapis.com/zenn-user-upload/fb9c989ee7ba3f1e13bfaefd.png)
*side-by-side on*

#### è¿½åŠ /å‰Šé™¤ã•ã‚ŒãŸè¡Œã« +/-ãƒãƒ¼ã‚¯ã‚’ã¤ã‘ã‚‹

```
delta --keep-plus-minus-markers
```

#### n/Nã§å‰æ–¹/å¾Œæ–¹ã‚¸ãƒ£ãƒ³ãƒ—ã§ãã‚ˆã†ã«ã™ã‚‹

```
delta --navigate hoge.txt foo.txt
```

#### ç¾åœ¨è¨­å®šã•ã‚Œã¦ã„ã‚‹configä¸€è¦§ã‚’è¦‹ã‚‹

```
delta --show-config
```

#### ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã‚‹è¨€èªä¸€è¦§ã‚’è¡¨ç¤º

```
delta --list-languages
```

#### ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒåä¸€è¦§ã‚’è¡¨ç¤º

```
delta --list-syntax-themes
```

#### ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒä¸€è¦§ã‚’ãƒ‡ãƒ¢ä»˜ãã§è¡¨ç¤º

```
delta --show-syntax-themes
```


## è¦‹ãŸç›®ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

#### ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒ†ãƒ¼ãƒã®è¨­å®š

syntax-themeã§ãƒ†ãƒ¼ãƒåæŒ‡å®šãªã®ã§ç°¡å˜
è¨€èªã‚µãƒãƒ¼ãƒˆã‚‚å¤šã‚
ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã‚‹ãƒ†ãƒ¼ãƒã¯å‰è¿°ã—ãŸ  `delta --list-syntax-themes` ã§ç¢ºèª

```
[delta]
    syntax-theme = Monokai Extended
```



#### åå‰ä»˜ãã‚°ãƒ«ãƒ¼ãƒ—

feature å¥ã‚’git configã§è¨­å®šã™ã‚‹ã“ã¨ã§ã€åå‰ä»˜ãã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
ä»¥ä¸‹ã®ä¾‹ã ã¨ã€`delta "my-delta-config"` ã«æŒ‡å®šã—ãŸè¨­å®šãŒæœ‰åŠ¹ã«ãªã‚‹

```
[delta]
    features = my-delta-config

[delta "my-delta-config"]
    side-by-side = true
    syntax-theme = Dracula
```



#### å…¬å¼ãŒç”¨æ„ã—ã¦ã„ã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒã‚’ä½¿ç”¨ã™ã‚‹

deltaã§ã¯ã€syntax-highlightã®ä»–ã« `è¿½åŠ è¡Œã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚«ãƒ©ãƒ¼`ã‚„`ãƒ•ã‚¡ã‚¤ãƒ«åã®è¡¨ç¤ºæ–¹æ³•`ãªã©ã‚‚ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹

å…¬å¼ãŒ ç”¨æ„ã—ã¦ã‚‹ãƒ†ãƒ¼ãƒã‚‚ã‚ã£ã¦ã€ å…ˆç¨‹ã® featuresã§ èª­ã¿è¾¼ã¾ã›ã¦ä½¿ã†ã“ã¨ãŒå¯èƒ½

https://github.com/dandavison/delta/blob/master/themes.gitconfig

1. â†‘ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©å½“ãªå ´æ‰€ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹

2. `include`ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
```
[include]
    path = {ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸPATH}/themes.gitconfig
```

3. featuresã§ä»»æ„ã®ãƒ†ãƒ¼ãƒã‚’èª­ã¿è¾¼ã‚€
```
[delta]
    features = collared-trogon
```


`woolly-mammoth` :elephant: ãŒã„ã„æ„Ÿã˜ã§ã—ãŸï¼ˆè‰²ãã¤ã„ã‘ã©ç¬‘ï¼‰

![](https://storage.googleapis.com/zenn-user-upload/07f9eea5b4706a649efaa2ba.png)

## æ‰€æ„Ÿ

- **Rust ã¯ã™ã”ã„**
- ~~æ­£ç›´diffã‚³ãƒãƒ³ãƒ‰ã§å·®åˆ†ã¿ã‚‹ã“ã¨ãªã„ã®ã§~~ã“ã‚Œã‚’æ©Ÿã«diffæ“ä½œãƒã‚¹ã‚¿ãƒ¼ã—ãŸã„
- [tig](https://github.com/jonas/tig) ã§ã‚µãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‰ã™ã”ã„å¬‰ã—ã„ã‚“ã§ã™ãŒã€ ISSUEã¯ãŸã£ã¦ã‚‹ã‚‚ã®ã®ä¸­ã€…é€²æ—ãŒãªã„ã‚ˆã†ã§ã™